sudo: required
language: python
python:
    - "2.7"
compiler:
    - gcc
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - gcc-4.8
    - g++-4.8
before_install:
    - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
    - sudo add-apt-repository -y ppa:dns/gnu
    - sudo apt-get update -qq
    # - curl http://ftp.gnu.org/gnu/autoconf/autoconf-2.69.tar.gz > autoconf-2.69.tar.gz
    # - tar -xvf autoconf-2.69.tar.gz
install:
    - sudo apt-get install -qq g++-4.8
    - export CXX="g++-4.8"
    - sudo apt-get autoremove automake
    - sudo apt-get install texinfo
    # #install autoconf 2.69 for automake
    # - cd autoconf-2.69
    # - ./configure
    # - make -j4
    # - sudo make install
    # - cd ..
    #install automake 1.14 for thrift
    # - git clone http://anonscm.debian.org/cgit/users/eric/automake-1.14.git
    # - cd automake-1.14
    # - ./bootstrap.sh
    # - ./configure
    # - make -j4
    # - sudo make install
    # - cd ..
    - sudo apt-get install automake
    - sudo apt-get install libboost-dev libboost-test-dev libboost-program-options-dev libevent-dev libtool flex bison pkg-config g++ libssl-dev
    - sudo apt-get install build-essential libgtk2.0-dev libjpeg-dev libtiff4-dev libjasper-dev libopenexr-dev cmake python-dev python-numpy python-tk libtbb-dev libeigen3-dev yasm libfaac-dev libopencore-amrnb-dev libopencore-amrwb-dev libtheora-dev libvorbis-dev libxvidcore-dev libx264-dev libqt4-dev libqt4-opengl-dev sphinx-common texlive-latex-extra libv4l-dev libdc1394-22-dev libavcodec-dev libavformat-dev libswscale-dev default-jdk libvtk5-qt4-dev
    - cd remote && npm install
    - cd ..
before_script:
    #install thrift
    # - git clone git://git.apache.org/thrift.git thriftbuild
    # - cd thriftbuild
    # - git checkout 0.9.3
    # - ./configure && make && sudo make install
    # - cd ..
    - curl http://www.carfab.com/apachesoftware/thrift/0.9.3/thrift-0.9.3.tar.gz > thrift-0.9.3.tar.gz
    - tar -xf thrift-0.9.3.tar.gz
    - cd thrift-0.9.3 && ./configure && make && sudo make install
    - cd ..
    #install opencv 2.4
    - git clone https://github.com/Itseez/opencv.git
    - cd opencv
    - git checkout 2.4
    - mkdir build
    - cd build
    - cmake ..
    - make -j8
    - sudo make -j8 install
    - cd ../..
    #generate thrift files and copy into place
    - sh thrift/gen.sh
